# REPL

Harbor-CLI has a built-in REPL (Read-Eval-Print-Loop) that can be used to interactively run commands. This is useful for testing out commands and exploring the API.

REPL mode is also highly useful when not storing credentials in the configuration file, since it allows for running multiple commands without having to re-authenticate each time. REPL mode will only ask for authentication info when starting the REPL, and will then use the same credentials for all subsequent commands.

The REPL is automatically generated by [click-repl](https://github.com/click-contrib/click-repl).


## Starting the REPL
To start the REPL, run:

```
harbor repl
```

This starts a persistent interactive session wherein every command can be executed. The difference between this and the normal usage mode is that once a command has been executed, you are returned back to the interactive prompt instead of exiting.




## REPL Commands

REPL-specific help can be displayed with the `:help` command:

```
> :help
REPL help:

  External Commands:
    prefix external commands with "!"

  Internal Commands:
    prefix internal commands with ":"
    :exit, :q, :quit  exits the repl
    :?, :h, :help     displays general help information
```

Quit the REPL with the `:quit` command:

```
> :quit
```



## Top-level commands
Top-level help can be displayed with the `--help` option:

```
> --help

 Usage: harbor  [OPTIONS] COMMAND [ARGS]...

 Harbor CLI

╭─ Options ────────────────────────────────────────────────────────────────────╮
│ --config          -c                      PATH             Path to config    │
│                                                            file.             │
# ...
```

## Subcommands

```
> project --help

 Usage: harbor  project [OPTIONS] COMMAND [ARGS]...

 Manage projects.

╭─ Options ────────────────────────────────────────────────────────────────────╮
│ --help          Show this message and exit.                                  │
╰──────────────────────────────────────────────────────────────────────────────╯
╭─ Commands ───────────────────────────────────────────────────────────────────╮
│ create        Create a new project.                                          │
│ delete        Delete a project.                                              │
│ exists        Check if a project with the given name exists.                 │
│ get           Get information about a project.                               │
│ list          Fetch projects.                                                │
│ logs          Fetch recent logs for a project.                               │
│ metadata      Manage project metadata.                                       │
│ scanner       Manage project scanners.                                       │
│ summary       Fetch project summary.                                         │
│ update        Update project information                                     │
╰──────────────────────────────────────────────────────────────────────────────╯
```

## Options

To use top-level options, specify them before the subcommand as usual:

```
> --format json system volumes
{
  "storage": [
    {
      "total": 912470835200,
      "free": 99034193920
    }
  ]
}
```

Subcommand options are specified after the subcommand:

```
> system volumes --help

 Usage: harbor  system volumes [OPTIONS]

 Get information about the system volumes.

╭─ Options ────────────────────────────────────────────────────────────────────╮
│ --help          Show this message and exit.                                  │
╰──────────────────────────────────────────────────────────────────────────────╯
```
